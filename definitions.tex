
\usepackage{nameref}

%SCN START

\newif\iffilemode
\filemodefalse

\makeatletter

\newcommand*{\trim}[1]{%
  \trim@spaces@noexp{#1}%
}

\newcounter{ind}
\newcounter{hind}

\newenvironment{SCn}{
\setcounter{ind}{0}
\setcounter{hind}{0} 
\begin{flushleft}
\noindent
}
{
\end{flushleft}
}
%-0.3em
\newcommand{\scnheader}[1]{\setlength{\hangindent}{\value{hind}em}~\vspace{\parskip}\\
\textit{\textbf{#1}}\\}

\newcommand{\scnsectionheader}[1]{\scnheader{\Large #1}}

\newcommand{\scnrelfrom}[2]{
\hspace{\value{ind}em}$\bm{\Rightarrow}$ {\itshape #1*}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\hspace{0.2em}\hspace{\value{ind}em}{\itshape #2} \\
\addtocounter{ind}{-1}
\addtocounter{hind}{-1}
}

\NewDocumentCommand\scnlist{>{\SplitList{;}}m}
   {\ProcessList{#1}{\scnlistitem}}

\NewDocumentCommand\scnfilelist{>{\SplitList{;}}m}
   {\ProcessList{#1}{\scnfilelistitem}}

\newcommand\scnlistitem[1]{
\hspace{0.2em}\hspace{\value{ind}em}{$\bullet$ \itshape #1} \\
}

\newcommand\scnfilelistitem[1]{
\addtocounter{hind}{1}
\begin{adjustwidth}{\value{ind}em+1.4em}{0em}
\justify
\hspace{-1.2em}\normalfont $\bullet$~[#1]
\end{adjustwidth}
\addtocounter{hind}{-1}
}

\newcommand{\scnrelfromlist}[2]{
\hspace{\value{ind}em}$\bm{\Rightarrow}$ {\itshape #1*}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{2}
\setlength{\hangindent}{\value{hind}em} 

\scnlist{#2}

\addtocounter{ind}{-1}
\addtocounter{hind}{-2}
}

\newcommand{\scnrelfromfilelist}[2]{
\hspace{\value{ind}em}$\bm{\Rightarrow}$ {\itshape #1*}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{2}
\setlength{\hangindent}{\value{hind}em} 

\scnfilelist{#2}

\addtocounter{ind}{-1}
\addtocounter{hind}{-2}
}

\newcommand{\scnreltolist}[2]{
\hspace{\value{ind}em}$\bm{\Leftarrow}$ {\itshape #1*}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{2}
\setlength{\hangindent}{\value{hind}em} 

\iffilemode
\scnfilelist{#2}
\else
\scnlist{#2}
\fi

\addtocounter{ind}{-1}
\addtocounter{hind}{-2}
}

\newcommand{\scnrelfromcommonset}[4]{
\hspace{\value{ind}em}$\bm{\Rightarrow}$ {\itshape #3*}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{2}
\setlength{\hangindent}{\value{hind}em} 

\hspace{\value{ind}em}$#1$\\
%\scnlist{#4}
\iffilemode
\scnfilelist{#4}
\else
\scnlist{#4}
\fi
\hspace{\value{ind}em}$#2$\\

\addtocounter{ind}{-1}
\addtocounter{hind}{-2}
}

\newcommand{\scnrelfromset}[2]{\scnrelfromcommonset{\{}{\}}{#1}{#2}}

\newcommand{\scnrelfromvector}[2]{\scnrelfromcommonset{<}{>}{#1}{#2}}

\newcommand{\scnreltocommonset}[4]{
\hspace{\value{ind}em}$\bm{\Leftarrow}$ {\itshape #3*}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{2}
\setlength{\hangindent}{\value{hind}em} 

\hspace{\value{ind}em}$\pmb{#1}$\\
%\scnlist{#4}
\iffilemode
\scnfilelist{#4}
\else
\scnlist{#4}
\fi
\hspace{\value{ind}em}$\pmb{#2}$\\

\addtocounter{ind}{-1}
\addtocounter{hind}{-2}
}

\newcommand{\scnreltoset}[2]{\scnreltocommonset{\{}{\}}{#1}{#2}}

\newcommand{\scnreltovector}[2]{\scnreltocommonset{\langle}{\rangle}{#1}{#2}}

\newcommand{\scneq}[1]{
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\hspace{\value{ind}em}$\bm{=}$ {\itshape #1}\\
\addtocounter{hind}{-1}
}

\newcommand{\scneqfile}[1]{
\hspace{\value{ind}em}$\bm{=}$ 
\addtocounter{ind}{1}
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\scnfilelong{#1}
\addtocounter{ind}{-1}
\addtocounter{hind}{-1}
}

\newcommand{\scneqtoset}[1]{
\hspace{\value{ind}em}$\bm{=\{}$\\
\addtocounter{ind}{1}
\addtocounter{hind}{2}
\setlength{\hangindent}{\value{hind}em} 
\scnlist{#1}
\hspace{\value{ind}em}$\}$\\
\addtocounter{ind}{-1}
\addtocounter{hind}{-2}
}

\newcommand{\scnrelto}[2]{
\hspace{\value{ind}em}$\bm{\Leftarrow}$ {\itshape #1*}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\hspace{0.2em}\hspace{\value{ind}em}{\itshape #2}\\
\addtocounter{ind}{-1}
\addtocounter{hind}{-1}
}

\newcommand{\scnrelboth}[2]{
\hspace{\value{ind}em}$\bm{\Leftrightarrow}$ {\itshape #1*}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\hspace{0.2em}\hspace{\value{ind}em}{\itshape #2} \\
\addtocounter{hind}{-1}
\addtocounter{ind}{-1}
}

\newcommand{\scnsubset}[1]{
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\hspace{\value{ind}em}$\bm{\subset}$ {\itshape #1}\\
\addtocounter{hind}{-1}
}

\newcommand{\scnsuperset}[1]{
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\hspace{\value{ind}em}$\bm{\supset}$ {\itshape #1}\\
\addtocounter{hind}{-1}
}

\newcommand{\scniselement}[1]{
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\hspace{\value{ind}em}$\bm{\in}$ {\itshape #1}\\
\addtocounter{hind}{-1}
}

\newcommand{\scnhaselementlist}[2]{
\hspace{\value{ind}em}$\bm{\ni}$ {\itshape #1'}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{2}
\setlength{\hangindent}{\value{hind}em} 
\scnlist{#2}
\addtocounter{ind}{-1}
\addtocounter{hind}{-2}
}

\newcommand{\scnhaselement}[1]{
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\hspace{\value{ind}em}$\bm{\ni}$ {\itshape #1}\\
\addtocounter{hind}{-1}
}

\newcommand{\scnhaselementrole}[2]{
\hspace{\value{ind}em}$\bm{\ni}$ {\itshape #1'}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\hspace{0.2em}\hspace{\value{ind}em}{\itshape #2}\\
\addtocounter{ind}{-1}
\addtocounter{hind}{-1}
}

\newcommand{\scniselementrole}[2]{
\hspace{\value{ind}em}$\bm{\in}$ {\itshape #1'}:\\
\addtocounter{ind}{1}
\addtocounter{hind}{1}
\setlength{\hangindent}{\value{hind}em} 
\hspace{0.2em}\hspace{\value{ind}em}{\itshape #2}\\
\addtocounter{ind}{-1}
\addtocounter{hind}{-1}
}

\newcommand{\scnrole}[1]{{\itshape #1'}:}

\newcommand{\scnset}[1]{$\bm{\{}$#1$\bm{\}}$}

\newcommand{\scnidtf}[1]{
\addtocounter{hind}{1}
\begin{adjustwidth}{\value{ind}em+1.6em}{0em}
\justify
\hspace{-1.6em}\normalfont $\bm{\coloneqq}$~[#1]
\end{adjustwidth}
\addtocounter{hind}{-1}
}

\newcommand{\scnaddlevel}[1]{
\addtocounter{ind}{#1}
\addtocounter{hind}{#1}
}

\newcommand{\scnaddhind}[1]{
\addtocounter{hind}{#1}
}

\newcommand{\scnresetlevel}{
\setcounter{ind}{0}
\setcounter{hind}{0} 
}

\newcommand{\scnfileshort}[1]{
{\normalfont [#1]}
}

\newcommand{\scnfilelong}[1]{
\begin{adjustwidth}{\value{ind}em+0.6em}{0em}
\justify
\setlength{\parindent}{0em}
\setlength{\itemindent}{0em}
\setlength{\parskip}{0.5em}
\vspace{-1.5em}
\hspace{-0.4em}\normalfont \textbf{[}#1\textbf{]}
\end{adjustwidth}
}

\newcommand{\scnstartsubstruct}{\hspace{\value{ind}em}$\bm{\supset=\{}$}
\newcommand{\scnstartstruct}{\hspace{\value{ind}em}$\bm{=\{}$}
\newcommand{\scnendstruct}{\hspace{\value{ind}em}$\bm{\}}$}

\newcommand{\scnstartfile}{\hspace{\value{ind}em}\textbf{=[}}

\newcommand{\scnendfile}{\hspace{\value{ind}em}\textbf{]}}


\newcommand{\scnfilelongbreaks}[1]
{\scnfilelong{\\#1\\}}

\newcommand{\scntext}[2]{
\scnrelfrom{#1}{\scnfilelong{#2}}
}

\newcommand{\scncomment}[1]{
\scntext{комментарий}{#1}
}

\newcommand{\scnexplanation}[1]{
\scntext{пояснение}{#1}
}

\newcommand{\scnnote}[1]{
\scntext{примечание}{#1}
}

\newcommand{\scndefinition}[1]{
\scntext{определение}{#1}
}

\newcommand{\scnevolution}[1]{
\scntext{эволюция}{#1}
}

\newcommand{\scnproblems}[1]{
\scntext{проблемы}{#1}
}

\newcommand{\scnevolutiondirections}[1]{
\scntext{направления эволюции}{#1}
}

\newcommand{\scnevolutionproblems}[1]{
\scntext{проблемы развития}{#1}
}

\newcommand{\scnmodernstate}[1]{
\scntext{современное состояние}{#1}
}

\newcommand{\scnsolutionapproach}[1]{
\scntext{предлагаемый подход к решению}{#1}
}

\newcommand{\scnadvantages}[1]{
\scntext{достоинства}{#1}
}

\newcommand{\scnprinciples}[1]{
\scntext{принципы}{#1}
}

\newcommand{\scnspheresapplication}[1]{
\scntext{сферы применения}{#1}
}

\newcommand{\scnseminclusion}[1]{
\scntext{семантическое включение}{#1}
}

\newcommand{\scnsourcecomment}[1]{{\normalfont \normalsize \textbf{/*}#1\textbf{*/}}}

\newcommand{\scnsourcecommentpar}[1]{
\justifying
\noindent
\setlength{\hangindent}{\value{hind}em+1em}
\hspace{\value{ind}em}\scnsourcecomment{#1}}

\newcommand{\scnauthorcomment}[1]{\begin{flushleft}
/*/*#1*/*/\end{flushleft}}

\newenvironment{FileFrame}{
\begin{mdframed}[linewidth=0.5mm,roundcorner=0pt]
}
{
\end{mdframed}
}

\newenvironment{ContourFrame}{
\begin{mdframed}[linewidth=0.5mm,roundcorner=20pt]
}
{
\end{mdframed}
}

%Subject domains
\newcommand{\scnsdmainclass}[1]{
\scnhaselementlist{максимальный класс объектов исследования}{#1}
}

\newcommand{\scnsdmainclasssingle}[1]{
\scnhaselementrole{максимальный класс объектов исследования}{#1}
}

\newcommand{\scnsdclass}[1]{
\scnhaselementlist{класс объектов исследования}{#1}
}

\newcommand{\scnsdrelation}[1]{
\scnhaselementlist{исследуемое отношение}{#1}
}

\newcommand{\timestamp}{\vspace{0.5em}\scnauthorcomment{\textbf{\Large Версия от \today~ \currenttime}}}

\newcommand{\addedstart}{\reversemarginpar\marginpar{\hspace{3em}НОВОЕ~[}}

\newcommand{\addedend}{\reversemarginpar\marginpar{\hspace{3em}]~НОВОЕ}}

\newcommand{\editedstart}{\reversemarginpar\marginpar{\hspace{3em}ИЗМЕНЕНО~[}}

\newcommand{\editedend}{\reversemarginpar\marginpar{\hspace{3em}]~ИЗМЕНЕНО}}


\makeatother

%SCN END

%Sections START

\titleformat{\chapter}[display]
{\normalfont\bfseries}{}{0pt}{\Large}

\titleformat{\section}[display]
{\normalfont\bfseries}{}{0pt}{\Large}

\titleformat{\subsection}[display]
{\normalfont\bfseries}{}{0pt}{\Large}

\titleformat{\subsubsection}[display]
{\normalfont\bfseries}{}{0pt}{\Large}

\titleformat{\paragraph}[display]
{\normalfont\bfseries}{}{0pt}{\Large}

\titlespacing*{\chapter}
{0em}{0em}{0em}
\titlespacing*{\section}
{0em}{0em}{0em}
\titlespacing*{\subsection}
{0em}{0em}{0em}
\titlespacing*{\subsubsection}
{0em}{0em}{0em}
\titlespacing*{\paragraph}
{0em}{0em}{0em}

\newcommand{\filldots}{\xleaders\hbox{*}\hfill}
\newlength\afterparlength
\setlength{\afterparlength}{-2.5em}

\newcommand{\scsuperchapter}{{\normalfont\bfseries\Large/*~Представляемый надраздел~\filldots/}}

\newcommand{\scchapter}[1]{\clearpage
\chapter[#1]{/*~Раздел-часть \thechapter~\filldots/\vspace{\afterparlength}}}

\newcommand{\scsection}[1]{\clearpage
\section[#1]{/*~Раздел-глава \thesection~\filldots/\vspace{\afterparlength}}}

\newcommand\scsubsection[1]{\clearpage
\subsection[#1]{/*~Раздел-параграф \thesubsection~\filldots/\vspace{\afterparlength}}}

\WithSuffix\newcommand\scsubsection*[2]{\clearpage\subsection*{/*~Раздел-параграф #2~\filldots/\vspace{\afterparlength}}
\addcontentsline{toc}{subsection}{#1}
}

\newcommand{\scsubsubsection}[1]{\clearpage
\subsubsection[#1]{/*~Раздел-пункт \thesubsubsection~\filldots/\vspace{\afterparlength}}}

\WithSuffix\newcommand\scsubsubsection*[2]{\clearpage\subsubsection*{/*~Раздел-пункт #2~\filldots/\vspace{\afterparlength}}
\addcontentsline{toc}{subsubsection}{#1}
}

\newcommand{\scparagraph}[1]{\clearpage
\paragraph[#1]{/*~Раздел-подпункт \theparagraph~\filldots/\vspace{\afterparlength}}}

\newcommand{\scchapterfinish}[1]{\clearpage
\section*{/*~Завершение раздела-части \ref{#1}~\filldots/\vspace{\afterparlength}}}

\newcommand{\scsectionfinish}[1]{\clearpage
\section*{/*~Завершение раздела-главы \ref{#1}~\filldots/\vspace{\afterparlength}}}

\newcommand{\scsubsectionfinish}[1]{\clearpage
\subsection*{/*~Завершение раздела-параграфа \ref{#1}~\filldots/\vspace{\afterparlength}}}

\newcommand{\scsubsubsectionfinish}[1]{\clearpage
\subsubsection*{/*~Завершение раздела-пункта \ref{#1}~\filldots/\vspace{\afterparlength}}}

\makeatletter
\newcommand*{\currentname}{\@currentlabelname}
\makeatother

%Sections END

% Other

\newenvironment{scnitemize}{
\begin{itemize}[leftmargin=\leftmargin +\value{ind}em-1.5em,itemsep=-0.25em,before=\vspace{-0.8em},after=\vspace{-0.5em}]
\renewcommand{\labelitemi}{\scriptsize$\square$}
\renewcommand{\labelitemii}{\scriptsize$\square~\square$}
\renewcommand{\labelitemiii}{\scriptsize$\square~\square~\square$} 
}
{
\end{itemize}
}

\newenvironment{scnitemizeii}{
%\begin{itemize}[leftmargin=\leftmargin +0.25em,itemsep=-0.25em,topsep=-0.75em]
\begin{itemize}[leftmargin=\leftmargin +0.25em,itemsep=-0.25em,before=\vspace{-0.3em},after=\vspace{0em}]
\renewcommand{\labelitemi}{\scriptsize$\square~\square$} 
}
{
\end{itemize}
}

\newenvironment{scnitemizeiii}{
%\begin{itemize}[leftmargin=\leftmargin +0.75em,itemsep=-0.25em,topsep=-0.75em]
\begin{itemize}[leftmargin=\leftmargin +0.75em,itemsep=-0.25em,before=\vspace{-0.3em},after=\vspace{0em}]

\renewcommand{\labelitemi}{\scriptsize$\square~\square$} 
}
{
\end{itemize}
}

\newenvironment{scnenumerate}{
\begin{enumerate}[leftmargin=\leftmargin +\value{ind}em-1.25em,itemsep=-0.25em,before=\vspace{-0.8em},after=\vspace{-0.5em}]
}
{
\end{enumerate}
}

\newcommand{\scncontentname}{\begin{SCn}
\scnsectionheader{Оглавление описания Технологии OSTIS}
$\bm{=[}$
\end{SCn}}